// base_offset_return-mips-linux-gnu-gcc-9_text.c
// Generated by decompiling base_offset_return-mips-linux-gnu-gcc-9
// using Reko decompiler version 0.9.1.0.

#include "base_offset_return-mips-linux-gnu-gcc-9_text.h"

// 00000400: void deregister_tm_clones()
// Called from:
//      __do_global_dtors_aux
void deregister_tm_clones()
{
	if (globals->t106A8 == 67228)
		return;
	<anonymous> * r25_12 = globals->ptr106D0;
	if (r25_12 == null)
		return;
	r25_12();
}

// 00000438: void register_tm_clones()
// Called from:
//      frame_dummy
void register_tm_clones()
{
	Eq_20 r2_9 = globals->t106A8;
	if ((r2_9 - 67228 >>u 0x1F) + (r2_9 - 67228 >> 0x02) >> 0x01 == 0x00)
		return;
	<anonymous> * r25_17 = globals->ptr106D4;
	if (r25_17 == null)
		return;
	r25_17();
}

// 00000484: void __do_global_dtors_aux()
void __do_global_dtors_aux()
{
	if ((word32) globals->b106E0 == 0x00)
	{
		if (__cxa_finalize != 0x00)
		{
			word32 r2_24 = globals->dw106B0;
			word32 r25_27;
			word32 r3_30;
			__cxa_finalize();
		}
		Eq_57 r2_40 = globals->t106E4;
		Eq_57 r17_42 = (globals->dw106B4 - 67220 >> 0x02) + -1;
		while ((word32) (r2_40 < r17_42) != 0x00)
		{
			Eq_57 r2_47 = (word32) r2_40 + 1;
			globals->t106E4 = r2_47;
			<anonymous> ** r2_52 = (r2_47 << 0x02) + 67220;
			word32 r4_60;
			(*r2_52)();
			r2_40 = globals->t106E4;
		}
		deregister_tm_clones();
		globals->b106E0 = 0x01;
	}
}

// 00000564: void frame_dummy()
void frame_dummy()
{
	register_tm_clones();
}

// 00000580: Register int32 getIndex(Register word32 r4, Register word32 ra, Register out ptr32 r3Out)
// Called from:
//      foo
int32 getIndex(word32 r4, word32 ra, ptr32 & r3Out)
{
	if (r4 == 0x00)
	{
		ptr32 r3_11;
		int32 r2_8 = foo(r4, ra, out r3_11);
		r3Out = r3_11;
		return r2_8;
	}
	else
	{
		r3Out = r3;
		return 1;
	}
}

// 00000590: Register ui32 foo(Register word32 r4, Register word32 ra, Register out (ptr32 word32) r3Out)
// Called from:
//      getIndex
ui32 foo(word32 r4, word32 ra, word32 & r3Out)
{
	if (r4 == 0x00)
	{
		r3Out = r3;
		return 0x00;
	}
	else
	{
		word32 r3_19;
		ui32 r2_20 = getIndex(r4, ra, out r3_19);
		word32 * r3_23 = r3_19 + (r2_20 << 0x02);
		*r3_23 = 0x00;
		r3Out = r3_23;
		return r2_20;
	}
}

// 000005E0: void __do_global_ctors_aux()
void __do_global_ctors_aux()
{
	<anonymous> * r25_18 = globals->ptr1068C;
	if (r25_18 != (<anonymous> *) -1)
	{
		word32 * r16_21 = &globals->ptr1068C;
		do
		{
			r25_18();
			r16_21 += -1;
			r25_18 = *r16_21;
		} while (r25_18 != (<anonymous> *) -1);
	}
}

